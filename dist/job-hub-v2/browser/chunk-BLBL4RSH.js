import{a as A}from"./chunk-JWNTM4EV.js";import{b as L,i as f,n as k,o as j}from"./chunk-RGMM4CGJ.js";import{Bb as p,Cb as c,Db as b,Fb as g,Hb as F,Ja as s,Ka as a,X as O,Za as x,ba as U,bb as u,fa as d,gb as r,hb as i,hc as N,ib as P,ic as w,jc as T,lb as S,mc as v,na as y,oa as _,ob as l,qb as I,va as C}from"./chunk-5MFQLEWO.js";var G=class o{baseURL=`${k.apiUrl}/communities`;http=U(L);getGroups(){return this.http.get(`${this.baseURL}`)}getUserGroups(t){return this.http.get(`${this.baseURL}/user/${t}/groups`)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=O({token:o,factory:o.\u0275fac,providedIn:"root"})};function z(o,t){if(o&1){let e=S();r(0,"div",3)(1,"div",4)(2,"div",5)(3,"h3",6),p(4),i(),r(5,"span",7),p(6,"Member"),i()(),r(7,"p",8),p(8),i(),r(9,"div",9)(10,"span",10),p(11),i(),r(12,"button",11),l("click",function(){let h=y(e).$implicit,m=I();return _(m.onLeaveGroup(h))}),p(13," Leave Group "),i()()()()}if(o&2){let e=t.$implicit;s(4),c(e.name),s(4),c(e.description),s(3),b("",e.membersCount," members")}}var E=class o{constructor(t,e,n){this.router=t;this.groupService=e;this.authService=n}myGroups=[];leaveGroup=new C;ngOnInit(){this.loadUserGroups()}loadUserGroups(){let t=this.authService.getUser()?.id;t?this.groupService.getUserGroups(t).subscribe({next:e=>this.myGroups=e,error:e=>console.error("Error al cargar los grupos del usuario:",e)}):console.error("No se pudo obtener el ID del usuario.")}goToGroupDetails(t){this.router.navigate(["/group-details",t])}onLeaveGroup(t){this.leaveGroup.emit(t)}static \u0275fac=function(e){return new(e||o)(a(f),a(G),a(j))};static \u0275cmp=d({type:o,selectors:[["app-my-groups"]],outputs:{leaveGroup:"leaveGroup"},standalone:!0,features:[g],decls:4,vars:1,consts:[[1,"text-2xl","font-bold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow overflow-hidden",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"p-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-xl","font-bold"],[1,"bg-green-200","text-green-800","text-xs","px-2","py-1","rounded-full"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-500"],[1,"bg-[#DEE7E7]","text-gray-700","px-4","py-2","rounded-full","hover:opacity-90",3,"click"]],template:function(e,n){e&1&&(r(0,"h2",0),p(1,"My Groups"),i(),r(2,"div",1),x(3,z,14,3,"div",2),i()),e&2&&(s(3),u("ngForOf",n.myGroups))},dependencies:[v,w],styles:[".group-image[_ngcontent-%COMP%]{width:100%;height:192px;object-fit:cover}"]})};var W=(o,t)=>({"bg-gray-400 text-gray-800":o,"bg-[#F26430] text-white":t});function q(o,t){o&1&&(r(0,"span",13),p(1,"Private"),i())}function K(o,t){o&1&&(r(0,"span",14),p(1,"Public"),i())}function Q(o,t){if(o&1){let e=S();r(0,"div",4)(1,"div",5)(2,"h3",6),p(3),i(),r(4,"p",7),p(5),i(),r(6,"div",8)(7,"span",9),p(8),i(),x(9,q,2,0,"span",10)(10,K,2,0,"span",11),r(11,"button",12),l("click",function(){let h=y(e).$implicit,m=I();return _(m.onJoinGroup(h))}),p(12),i()()()()}if(o&2){let e=t.$implicit;s(3),c(e.name),s(2),c(e.description),s(3),b("",e.membersCount," members"),s(),u("ngIf",e.isPrivate),s(),u("ngIf",!e.isPrivate),s(),u("ngClass",F(8,W,e.isPrivate&&e.isPending,!(e.isPrivate&&e.isPending)))("disabled",e.isPending),s(),b(" ",e.isPrivate&&e.isPending?"Pending":"Join Group"," ")}}var R=class o{constructor(t,e,n){this.router=t;this.groupService=e;this.authService=n}discoverGroups=[];userGroups=[];joinGroup=new C;ngOnInit(){this.loadUserGroups(),this.loadGroups()}loadUserGroups(){let t=this.authService.getUser()?.id;t?this.groupService.getUserGroups(t).subscribe({next:e=>this.userGroups=e,error:e=>console.error("Error al cargar los grupos del usuario:",e)}):console.error("No se pudo obtener el ID del usuario.")}loadGroups(){this.groupService.getGroups().subscribe({next:t=>{this.discoverGroups=t.filter(e=>!this.userGroups.some(n=>n.id===e.id))},error:t=>console.error("Error al cargar los grupos:",t)})}onJoinGroup(t){t.isPrivate?t.isPending=!0:this.joinGroup.emit(t)}goToGroupDetails(t){this.router.navigate(["/group-details",t])}static \u0275fac=function(e){return new(e||o)(a(f),a(G),a(j))};static \u0275cmp=d({type:o,selectors:[["app-discover-groups"]],outputs:{joinGroup:"joinGroup"},standalone:!0,features:[g],decls:5,vars:1,consts:[[1,"mt-8"],[1,"text-2xl","font-bold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow overflow-hidden",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"p-4"],[1,"text-xl","font-bold","mb-2"],[1,"text-gray-600","mb-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-500"],["class","bg-red-200 text-green-800 text-xs px-3 py-1 rounded-full",4,"ngIf"],["class","bg-blue-200 text-green-800 text-xs px-3 py-1 rounded-full",4,"ngIf"],[1,"px-4","py-2","rounded-full","hover:opacity-90",3,"click","ngClass","disabled"],[1,"bg-red-200","text-green-800","text-xs","px-3","py-1","rounded-full"],[1,"bg-blue-200","text-green-800","text-xs","px-3","py-1","rounded-full"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2",1),p(2,"Discover Groups"),i(),r(3,"div",2),x(4,Q,13,11,"div",3),i()()),e&2&&(s(4),u("ngForOf",n.discoverGroups))},dependencies:[v,N,w,T],styles:[".group-image[_ngcontent-%COMP%]{width:100%;height:192px;object-fit:cover}"]})};var D=class o{constructor(t){this.router=t}myGroups=[{name:"Web Design Inspiration",description:"Share and discover beautiful web design examples.",members:850,image:"https://acortar.link/hD2AWH",joined:!0},{name:"Frontend Masters",description:"Advanced frontend development techniques and best practices.",members:1500,image:"https://acortar.link/iI6EN9",joined:!0}];discoverGroups=[{name:"Angular Developers",description:"A community for Angular developers to share knowledge and experiences.",members:1200,image:"https://acortar.link/jpwNEM",joined:!1},{name:"Tech Startups Network",description:"Connect with other startup founders and developers.",members:3e3,image:"https://miro.medium.com/v2/resize:fit:1000/0*u-zoQfMGy1ySZGK1.jpg",joined:!1},{name:"UI/UX Community",description:"Discuss latest trends in UI/UX design and user experience.",members:2200,image:"https://www.prosperitydigital.es//storage/information-pages/June2022/UX-UI%20Visualisation1.png",joined:!1}];goToGroupDetails(t){this.router.navigate(["/groups",t])}toggleJoin(t){t.joined=!t.joined,t.members+=t.joined?1:-1,t.joined?(this.discoverGroups=this.discoverGroups.filter(e=>e!==t),this.myGroups.push(t)):(this.myGroups=this.myGroups.filter(e=>e!==t),this.discoverGroups.push(t)),this.myGroups.sort((e,n)=>e.name.localeCompare(n.name)),this.discoverGroups.sort((e,n)=>e.name.localeCompare(n.name))}static \u0275fac=function(e){return new(e||o)(a(f))};static \u0275cmp=d({type:o,selectors:[["app-group-layout"]],standalone:!0,features:[g],decls:5,vars:2,consts:[[1,"p-8"],[1,"max-w-6xl","mx-auto"],[3,"leaveGroup","myGroups"],[3,"joinGroup","discoverGroups"]],template:function(e,n){e&1&&(P(0,"app-navbar"),r(1,"div",0)(2,"div",1)(3,"app-my-groups",2),l("leaveGroup",function(m){return n.toggleJoin(m)}),i(),r(4,"app-discover-groups",3),l("joinGroup",function(m){return n.toggleJoin(m)}),i()()()),e&2&&(s(3),u("myGroups",n.myGroups),s(),u("discoverGroups",n.discoverGroups))},dependencies:[v,E,R,A]})};var be=[{path:"",component:D}];export{be as groupRoutes};
