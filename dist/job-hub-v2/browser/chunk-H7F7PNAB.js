import{a as H,b as z,c as L}from"./chunk-R3TZXTKX.js";import{a as $}from"./chunk-Q5AUJWSY.js";import{g as J,h as k,i as B,o as V}from"./chunk-RGMM4CGJ.js";import{Ab as v,Bb as a,Cb as c,Db as h,Fb as x,Gb as F,Ib as D,Ja as r,Jb as R,Lb as b,Za as g,ba as d,bb as s,cb as M,db as E,fa as u,gb as i,hb as n,ib as m,ic as w,jc as y,lb as N,lc as j,mc as P,na as A,oa as U,ob as T,pa as C,qa as O,qb as f}from"./chunk-5MFQLEWO.js";var _=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-layout"]],standalone:!0,features:[x],decls:1,vars:0,template:function(e,p){e&1&&m(0,"router-outlet")},dependencies:[k]})};function Q(o,t){if(o&1){let e=N();i(0,"div",9)(1,"div",10)(2,"div",11)(3,"span",12),a(4,"ID: "),n(),i(5,"span",13),a(6),D(7,"date"),n()()(),i(8,"div",14)(9,"div",15)(10,"h3",16),a(11),n(),i(12,"p",17),a(13),n()(),i(14,"div",18)(15,"span",19),a(16," Activa "),n()(),i(17,"button",20),T("click",function(){let l=A(e).$implicit,q=f(2);return U(q.goToFollowUp(l.id))}),C(),i(18,"svg",21),m(19,"path",22),n(),a(20," Ver Seguimiento "),n()()()}if(o&2){let e=t.$implicit;r(6),h(" ",R(7,3,e.applicationDate)," "),r(5),c(e.applicantName),r(2),h(" ",e.jobName||"Sin t\xEDtulo"," ")}}function W(o,t){if(o&1&&(i(0,"div")(1,"div",7),g(2,Q,21,5,"div",8),n()()),o&2){let e=f();r(2),s("ngForOf",e.applications)}}function X(o,t){o&1&&(i(0,"div",23),C(),i(1,"svg",24),m(2,"path",25),n(),O(),i(3,"h3",26),a(4,"No hay postulaciones"),n(),i(5,"p",27),a(6,"A\xFAn no has realizado ninguna postulaci\xF3n."),n()())}var S=class o{applicationService=d(H);authService=d(V);applicantService=d(z);router=d(B);applications=[];userId=this.authService.getUser()?.id;ngOnInit(){this.userId!==void 0?this.applicantService.findApplicantByUserId(this.userId).subscribe({next:t=>{t?this.applicationService.getApplicationsByApplicantId(t).subscribe({next:e=>this.applications=e,error:e=>console.error("Error al cargar postulaciones",e)}):console.warn("No se encontr\xF3 un solicitante asociado al usuario.")},error:t=>console.error("Error al buscar solicitante por ID de usuario",t)}):console.error("El ID del usuario no est\xE1 definido.")}goToFollowUp(t){this.router.navigate([`/applicant/application/myApplications/${t}/follow-up`])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-application"]],standalone:!0,features:[x],decls:10,vars:2,consts:[["noApplications",""],[1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-md","hover:shadow-lg","transition-shadow","duration-300","overflow-hidden"],[1,"px-6","py-4","bg-gradient-to-r","from-blue-500","to-blue-600"],[1,"flex","justify-between","items-center"],[1,"text-white","text-sm","font-medium"],[1,"bg-blue-100","text-blue-800","text-xs","font-semibold","px-2.5","py-0.5","rounded-full"],[1,"p-6"],[1,"mb-4"],[1,"text-xl","font-semibold","text-gray-800","mb-2"],[1,"text-sm","text-gray-600","line-clamp-2"],[1,"flex","flex-wrap","gap-2","mb-4"],[1,"px-3","py-1","text-xs","font-medium","bg-green-100","text-green-800","rounded-full"],[1,"w-full","bg-blue-500","hover:bg-blue-600","text-white","font-medium","py-2","px-4","rounded-lg","transition","duration-200","ease-in-out","flex","items-center","justify-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule","evenodd"],[1,"text-center","py-12","bg-white","rounded-lg","shadow-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"]],template:function(e,p){if(e&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),a(4,"Mis Postulaciones"),n(),i(5,"p",5),a(6,"Gestiona y realiza seguimiento a tus postulaciones activas"),n()(),g(7,W,3,1,"div",6)(8,X,7,0,"ng-template",null,0,b),n()()),e&2){let l=v(9);r(7),s("ngIf",p.applications.length>0)("ngIfElse",l)}},dependencies:[P,w,y,j]})};var Z=o=>({delay:o}),ee=o=>({value:"",params:o});function te(o,t){if(o&1&&(i(0,"div",12)(1,"div",13)(2,"p",14),a(3),n(),i(4,"div",15),m(5,"div",16),n(),i(6,"div",17)(7,"span",18),a(8),n(),i(9,"span",19),a(10),n()()()()),o&2){let e=t.$implicit,p=t.index,l=f(2);s("@phaseAnimation",F(21,ee,F(19,Z,p*200))),r(3),c(e.name),r(2),M("width",l.getPhaseProgress(e)),E("bg-green-500",l.getPhaseProgress(e)==="100%")("bg-yellow-500",l.getPhaseProgress(e)==="50%")("bg-red-500",l.getPhaseProgress(e)==="0%"),s("@progressAnimation",void 0),r(2),E("text-green-600",l.getPhaseProgress(e)==="100%")("text-yellow-600",l.getPhaseProgress(e)==="50%")("text-red-600",l.getPhaseProgress(e)==="0%"),r(),h(" ",l.getPhaseProgress(e)==="100%"?"Completada":l.getPhaseProgress(e)==="50%"?"En Progreso":"Pendiente"," "),r(2),c(l.getPhaseProgress(e))}}function ie(o,t){if(o&1&&(i(0,"div",3)(1,"h2",4),a(2," Ficha de Seguimiento "),n(),i(3,"div",5)(4,"div",6)(5,"p",7),a(6,"Nombre del Postulante"),n(),i(7,"p",8),a(8),n()(),i(9,"div",6)(10,"p",7),a(11,"Estado Actual"),n(),i(12,"p",8),a(13),n()(),i(14,"div",9)(15,"p",7),a(16,"Fase del Trabajo"),n(),i(17,"p",8),a(18),n()()(),i(19,"div",10),g(20,te,11,23,"div",11),n()()),o&2){let e=f();s("@fadeIn",void 0),r(),s("@slideIn",void 0),r(2),s("@cardAnimation",void 0),r(5),c(e.followUp.applicantName),r(5),c(e.followUp.status),r(5),c(e.followUp.jobPhaseName),r(2),s("ngForOf",e.phases)}}function ne(o,t){o&1&&(i(0,"div",20)(1,"div",21),m(2,"div",22),i(3,"p",23),a(4,"Cargando seguimiento..."),n()()()),o&2&&s("@pulseAnimation",void 0)}var I=class o{followUp=null;phases=[];route=d(J);followUpService=d(L);jobPhaseService=d($);constructor(){}ngOnInit(){let t=Number(this.route.snapshot.paramMap.get("applicationId"));this.followUpService.getFollowUp(t).subscribe({next:e=>{this.followUp=e,this.getJobIdByFollowUpId(e.id)},error:e=>console.error("Error al cargar seguimiento",e)})}getJobIdByFollowUpId(t){this.followUpService.getJobIdByFollowUpId(t).subscribe({next:e=>{this.loadJobPhases(e)},error:e=>console.error("Error al cargar el ID del trabajo",e)})}loadJobPhases(t){this.jobPhaseService.getPhasesByJob(t).subscribe({next:e=>{this.phases=e.sort((p,l)=>this.getPhaseOrder(p.orderPhase)-this.getPhaseOrder(l.orderPhase))},error:e=>console.error("Error al cargar fases del trabajo",e)})}getPhaseOrder(t){switch(t){case"FIRST":return 1;case"SECOND":return 2;case"THIRD":return 3;case"FOURTH":return 4;case"FIFTH":return 5;default:return 0}}getPhaseProgress(t){if(!this.followUp)return"0%";let e=this.getPhaseOrder(this.followUp.jobPhaseName),p=this.getPhaseOrder(t.orderPhase);return p<e?"100%":p===e?"50%":"0%"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=u({type:o,selectors:[["app-follow-up"]],standalone:!0,features:[x],decls:4,vars:2,consts:[["loading",""],[1,"min-h-screen","bg-gradient-to-br","from-blue-50","to-indigo-50","p-6"],["class","max-w-3xl mx-auto bg-white rounded-xl shadow-lg p-8",4,"ngIf","ngIfElse"],[1,"max-w-3xl","mx-auto","bg-white","rounded-xl","shadow-lg","p-8"],[1,"text-3xl","font-bold","mb-6","text-indigo-800","border-b","pb-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-8"],[1,"bg-indigo-50","p-4","rounded-lg"],[1,"text-sm","text-indigo-600","font-medium"],[1,"text-lg","font-semibold"],[1,"bg-indigo-50","p-4","rounded-lg","md:col-span-2"],[1,"space-y-8"],["class","phase-container",4,"ngFor","ngForOf"],[1,"phase-container"],[1,"relative","bg-white","p-6","rounded-xl","border","border-indigo-100","hover:shadow-md","transition-all","duration-300"],[1,"text-xl","font-semibold","text-indigo-900","mb-4"],[1,"relative","h-2","bg-gray-200","rounded-full","overflow-hidden"],[1,"h-full","rounded-full","transition-all","duration-1000","ease-out"],[1,"mt-2","flex","justify-between","items-center"],[1,"text-sm","font-medium"],[1,"text-sm","text-indigo-600"],[1,"flex","justify-center","items-center","min-h-[400px]"],[1,"text-center"],[1,"w-16","h-16","border-4","border-indigo-500","border-t-transparent","rounded-full","animate-spin","mx-auto","mb-4"],[1,"text-xl","text-indigo-800","font-medium"]],template:function(e,p){if(e&1&&(i(0,"div",1),g(1,ie,21,7,"div",2)(2,ne,5,1,"ng-template",null,0,b),n()),e&2){let l=v(3);r(),s("ngIf",p.followUp)("ngIfElse",l)}},dependencies:[P,w,y],styles:["@keyframes _ngcontent-%COMP%_phase-bar{0%{width:0%}to{width:100%}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-phase-bar[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_phase-bar 2s ease-in-out}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in 1s ease-in forwards}"]})};var Ie=[{path:"",component:_,children:[{path:"",redirectTo:"myApplications",pathMatch:"full"},{path:"myApplications",component:S},{path:"myApplications/:applicationId/follow-up",component:I}]}];export{Ie as applicationRoutes};
