import{a as w}from"./chunk-6ZGYDSY3.js";import{a as ee}from"./chunk-Q5AUJWSY.js";import{a as Z,b as te,c as g,e as oe,f as re,h as ie,i as ne,j as le,k as ae,l as me,m as se,n as de,o as pe,p as ue,r as ce,t as be}from"./chunk-JUWKGPSY.js";import{a as Y}from"./chunk-JWNTM4EV.js";import{b as K,h as Q,i as W,j as E,n as X,o as N}from"./chunk-RGMM4CGJ.js";import{Bb as i,Cb as f,Db as I,Fb as h,Ja as a,Ka as V,L as O,X as U,Za as p,a as A,b as L,ba as b,bb as d,db as G,fa as x,fb as B,gb as o,hb as e,ib as u,ic as T,jb as H,jc as D,kb as $,lb as J,mc as z,na as j,oa as F,ob as y,qb as v}from"./chunk-5MFQLEWO.js";var R=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["app-layout"]],standalone:!0,features:[h],decls:5,vars:0,consts:[[1,"layout-dashboard"],[1,"layout-content"]],template:function(t,l){t&1&&(u(0,"app-navbar"),o(1,"div",0)(2,"div",1),u(3,"router-outlet"),e()(),u(4,"app-footer"))},dependencies:[Z,Y,Q]})};function ge(n,r){}function ve(n,r){if(n&1){let t=J();o(0,"div",9),y("click",function(){let m=j(t).$implicit,s=v(2);return F(s.selectJob(m))}),o(1,"div",10)(2,"div",11)(3,"h3",12),i(4),e()(),o(5,"p",13),i(6),e(),o(7,"p",14),i(8),e(),o(9,"div",15)(10,"span",14),i(11),e()()()()}if(n&2){let t=r.$implicit,l=v(2);G("bg-blue-50",(l.selectedJob==null?null:l.selectedJob.id)===t.id),a(4),f(t.title),a(2),f(t.companyName),a(2),f(t.location),a(3),I("Hace ",t.postedDate,"")}}function xe(n,r){if(n&1&&(H(0),o(1,"div",16)(2,"div",17)(3,"div",18)(4,"div",19)(5,"div")(6,"h2",20),i(7),e(),o(8,"p",21),i(9),e(),o(10,"p",22),i(11),e()()()(),o(12,"div",23)(13,"button",24),i(14," Editar "),e(),o(15,"button",25),i(16," Eliminar "),e()(),o(17,"div",26)(18,"div",11)(19,"span"),i(20),e()(),o(21,"div")(22,"h3",27),i(23,"Acerca del empleo"),e(),o(24,"p",22),i(25),e()()()()(),$()),n&2){let t=v(2);a(7),f(t.selectedJob.title),a(2),f(t.selectedJob.companyName),a(2),I("",t.selectedJob.location," \xB7 Hace 1 d\xEDa \xB7 33 solicitudes"),a(9),f(t.selectedJob.type),a(5),f(t.selectedJob.description)}}function ye(n,r){if(n&1&&(o(0,"div",5)(1,"div",6),p(2,ve,12,6,"div",7),e(),p(3,xe,26,5,"ng-container",8),e()),n&2){let t=v();a(2),d("ngForOf",t.jobs),a(),d("ngIf",t.selectedJob)}}var P=class n{jobs=[];filteredJobs=[];selectedJob=null;jobService=b(w);router=b(W);constructor(){}ngOnInit(){this.jobService.getJobsDetails().subscribe({next:r=>{this.jobs=r,this.filteredJobs=r},error:r=>console.error("Error al cargar los trabajos",r)})}selectJob(r){this.selectedJob=r}RouterLink=E;isEmpty=O;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["app-job"]],standalone:!0,features:[h],decls:12,vars:2,consts:[[1,"max-w-7xl","mx-auto","px-4","py-6"],[1,"flex","flex-col-2","justify-between"],[1,"text-xl","font-semibold","mb-4"],[1,"text-sm","text-muted-foreground","mb-6"],["routerLink","/company/job-register",1,"px-6","py-2","bg-blue-600","text-white","rounded-full","hover:bg-blue-700"],[1,"grid","grid-cols-1","lg:grid-cols-12","gap-6"],[1,"lg:col-span-5","space-y-4"],["class","flex gap-4 p-4 border rounded-lg hover:border-blue-500 cursor-pointer",3,"bg-blue-50","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","gap-4","p-4","border","rounded-lg","hover:border-blue-500","cursor-pointer",3,"click"],[1,"flex-1"],[1,"flex","items-center","gap-2"],[1,"font-medium","text-blue-600"],[1,"text-sm"],[1,"text-sm","text-muted-foreground"],[1,"flex","items-center","gap-2","mt-2"],[1,"lg:col-span-7"],[1,"border","rounded-lg","p-6"],[1,"flex","justify-between","items-start","mb-6"],[1,"flex","gap-4"],[1,"text-xl","font-semibold"],[1,"text-lg"],[1,"text-muted-foreground"],[1,"flex","gap-4","mb-6"],[1,"px-6","py-2","bg-blue-600","text-white","rounded-full","hover:bg-blue-700"],[1,"px-6","py-2","border","rounded-full","hover:bg-gray-50"],[1,"space-y-6"],[1,"font-semibold","text-lg","mb-4"]],template:function(t,l){t&1&&(o(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),i(4,"Mis Empleos"),e(),o(5,"p",3),i(6),e()(),o(7,"div")(8,"a",4),i(9," Crear Empleo "),e()()(),p(10,ge,0,0)(11,ye,4,2,"div",5),e()),t&2&&(a(6),I("",l.jobs.length," resultados"),a(4),B(l.jobs.length==0?10:11))},dependencies:[T,D,E]})};var k=class n{baseUrl=`${X.apiUrl}/admin/companies`;http=b(K);authService=b(N);constructor(){}getCompanyIdByUserId(r){return this.http.get(`${this.baseUrl}/findCompanyIdByUserId/${r}`)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function he(n,r){n&1&&(o(0,"div",30),i(1," Title is required "),e())}function _e(n,r){n&1&&(o(0,"div",30),i(1," Salary is required "),e())}function Se(n,r){n&1&&(o(0,"div",30),i(1," Deadline date is required "),e())}function Ce(n,r){n&1&&(o(0,"div",30),i(1," Description is required "),e())}function Ee(n,r){n&1&&(o(0,"div",30),i(1," Job type is required "),e())}function je(n,r){n&1&&(o(0,"div",30),i(1," Location is required "),e())}function Fe(n,r){n&1&&(o(0,"div",30),i(1," Phase name is required "),e())}function Je(n,r){if(n&1){let t=J();o(0,"div",31),u(1,"input",32),o(2,"button",33),y("click",function(){let m=j(t).index,s=v();return F(s.removePhase(m))}),i(3,"Remove"),e(),p(4,Fe,2,0,"div",9),e()}if(n&2){let t,l=r.$implicit,m=r.index;d("formGroupName",m),a(4),d("ngIf",((t=l.get("name"))==null?null:t.touched)&&((t=l.get("name"))==null||t.errors==null?null:t.errors.required))}}var q=class n{constructor(r){this.fb=r;this.jobForm=this.fb.group({title:["",g.required],salary:["",g.required],deadlineDate:["",g.required],description:["",g.required],jobType:["",g.required],location:["",g.required],phases:this.fb.array([])})}authService=b(N);companyService=b(k);jobService=b(w);jobPhaseService=b(ee);jobForm;get phases(){return this.jobForm.get("phases")}addPhase(){this.phases.push(this.fb.group({name:["",g.required]}))}removePhase(r){this.phases.removeAt(r)}onSubmit(){if(!this.jobForm.valid){console.error("El formulario no es v\xE1lido");return}let r=this.authService.getUser()?.id;if(!r){console.error("No se pudo encontrar el usuario");return}this.companyService.getCompanyIdByUserId(r).subscribe({next:t=>{if(t===null){console.error("El ID de la compa\xF1\xEDa es nulo");return}let l=this.extractJobDetails(),m=L(A({},l),{salary:parseFloat(l.salary),deadlineDate:new Date(l.deadlineDate),companyId:t});this.jobService.register(m).subscribe({next:s=>{console.log("Trabajo registrado",s),this.savePhases(s.id)},error:s=>{console.error("Error al registrar el trabajo",s)}})},error:t=>{console.error("Error al obtener el ID de la compa\xF1\xEDa",t)}})}savePhases(r){let t=["FIRST","SECOND","THIRD","FOURTH","FIFTH"];this.phases.controls.forEach((l,m)=>{if(m>=t.length){console.error("No se pueden agregar m\xE1s de 5 fases");return}let s={name:l.value.name,jobId:r,orderPhase:t[m]};this.jobPhaseService.createJobPhase(s).subscribe({next:c=>console.log("Fase registrada",c),error:c=>console.error("Error al registrar la fase",c)})})}extractJobDetails(){let{title:r,salary:t,deadlineDate:l,description:m,jobType:s,location:c}=this.jobForm.value;return{title:r,salary:t,deadlineDate:l,description:m,jobType:s,location:c}}static \u0275fac=function(t){return new(t||n)(V(ce))};static \u0275cmp=x({type:n,selectors:[["app-job-register"]],standalone:!0,features:[h],decls:55,vars:9,consts:[[1,"flex","flex-col","items-center","justify-center","min-h-screen","bg-gray-100","p-6"],[1,"w-full","max-w-lg","bg-white","shadow-md","rounded-lg","p-8",3,"ngSubmit","formGroup"],[1,"flex","flex-col-2","justify-between"],[1,"text-2xl","font-semibold","text-gray-800","mb-6"],["routerLink","/company/job",1,"w-[15px]","h-[32px]"],[1,"fa-solid","fa-xmark","text-2xl"],[1,"mb-4"],["for","title",1,"block","text-gray-700","font-semibold","mb-1"],["id","title","type","text","formControlName","title",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["for","salary",1,"block","text-gray-700","font-semibold","mb-1"],["id","salary","type","number","step","0.01","formControlName","salary",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","deadlineDate",1,"block","text-gray-700","font-semibold","mb-1"],["id","deadlineDate","type","datetime-local","formControlName","deadlineDate",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","description",1,"block","text-gray-700","font-semibold","mb-1"],["id","description","formControlName","description","rows","4",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","jobType",1,"block","text-gray-700","font-semibold","mb-1"],["id","jobType","formControlName","jobType",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value",""],["value","FULL_TIME"],["value","PART_TIME"],["value","CONTRACT"],["value","FREELANCE"],["for","location",1,"block","text-gray-700","font-semibold","mb-1"],["id","location","type","text","formControlName","location",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formArrayName","phases",1,"mb-6"],[1,"text-xl","font-semibold","mb-2"],["class","flex items-center gap-4 mb-2",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"bg-green-500","text-white","px-3","py-1","rounded","hover:bg-green-600",3,"click"],["type","submit",1,"w-full","bg-blue-600","text-white","font-semibold","py-2","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:bg-blue-300",3,"disabled"],[1,"text-red-500","text-sm","mt-1"],[1,"flex","items-center","gap-4","mb-2",3,"formGroupName"],["type","text","placeholder","Phase Name","formControlName","name",1,"w-full","p-2","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","button",1,"text-red-500","hover:text-red-700",3,"click"]],template:function(t,l){if(t&1&&(o(0,"div",0)(1,"form",1),y("ngSubmit",function(){return l.onSubmit()}),o(2,"div",2)(3,"h2",3),i(4,"Create Job Listing"),e(),o(5,"a",4),u(6,"i",5),e()(),o(7,"div",6)(8,"label",7),i(9,"Title *"),e(),u(10,"input",8),p(11,he,2,0,"div",9),e(),o(12,"div",6)(13,"label",10),i(14,"Salary *"),e(),u(15,"input",11),p(16,_e,2,0,"div",9),e(),o(17,"div",6)(18,"label",12),i(19,"Deadline Date *"),e(),u(20,"input",13),p(21,Se,2,0,"div",9),e(),o(22,"div",6)(23,"label",14),i(24,"Description *"),e(),u(25,"textarea",15),p(26,Ce,2,0,"div",9),e(),o(27,"div",6)(28,"label",16),i(29,"Job Type *"),e(),o(30,"select",17)(31,"option",18),i(32,"Select a job type"),e(),o(33,"option",19),i(34,"Full Time"),e(),o(35,"option",20),i(36,"Part Time"),e(),o(37,"option",21),i(38,"Contract"),e(),o(39,"option",22),i(40,"Freelance"),e()(),p(41,Ee,2,0,"div",9),e(),o(42,"div",6)(43,"label",23),i(44,"Location *"),e(),u(45,"input",24),p(46,je,2,0,"div",9),e(),o(47,"div",25)(48,"h3",26),i(49,"Job Phases"),e(),p(50,Je,5,2,"div",27),o(51,"button",28),y("click",function(){return l.addPhase()}),i(52,"Add Phase"),e()(),o(53,"button",29),i(54," Submit "),e()()()),t&2){let m,s,c,_,S,C;a(),d("formGroup",l.jobForm),a(10),d("ngIf",((m=l.jobForm.get("title"))==null?null:m.touched)&&((m=l.jobForm.get("title"))==null||m.errors==null?null:m.errors.required)),a(5),d("ngIf",((s=l.jobForm.get("salary"))==null?null:s.touched)&&((s=l.jobForm.get("salary"))==null||s.errors==null?null:s.errors.required)),a(5),d("ngIf",((c=l.jobForm.get("deadlineDate"))==null?null:c.touched)&&((c=l.jobForm.get("deadlineDate"))==null||c.errors==null?null:c.errors.required)),a(5),d("ngIf",((_=l.jobForm.get("description"))==null?null:_.touched)&&((_=l.jobForm.get("description"))==null||_.errors==null?null:_.errors.required)),a(15),d("ngIf",((S=l.jobForm.get("jobType"))==null?null:S.touched)&&((S=l.jobForm.get("jobType"))==null||S.errors==null?null:S.errors.required)),a(5),d("ngIf",((C=l.jobForm.get("location"))==null?null:C.touched)&&((C=l.jobForm.get("location"))==null||C.errors==null?null:C.errors.required)),a(4),d("ngForOf",l.phases.controls),a(3),d("disabled",!l.jobForm.valid)}},dependencies:[z,T,D,be,ie,pe,ue,te,ne,de,oe,re,le,se,ae,me,E]})};var dt=[{path:"",component:R,children:[{path:"",redirectTo:"job",pathMatch:"full"},{path:"job",component:P},{path:"job-register",component:q}]}];export{dt as companyRoutes};
